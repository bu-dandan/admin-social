{"remainingRequest":"/Users/mac/code/2023/juliang/node_modules/babel-loader/lib/index.js!/Users/mac/code/2023/juliang/src/store/modules/user.js","dependencies":[{"path":"/Users/mac/code/2023/juliang/src/store/modules/user.js","mtime":1694243412356},{"path":"/Users/mac/code/2023/juliang/babel.config.js","mtime":1681876381588},{"path":"/Users/mac/code/2023/juliang/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/code/2023/juliang/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBhY2Nlc3NfdG9rZW4sIGxvZ291dCwgZ2V0SW5mbyBhcyBfZ2V0SW5mbyB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICcnCiAgfTsKfTsKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBtdXRhdGlvbnMgPSB7CiAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0lEX05BTUU6IGZ1bmN0aW9uIFNFVF9JRF9OQU1FKHN0YXRlLCBpZE5hbWUpIHsKICAgIHN0YXRlLmlkTmFtZSA9IGlkTmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1VTRVJfTElTVDogZnVuY3Rpb24gU0VUX1VTRVJfTElTVChzdGF0ZSwgdXNlckxpc3QpIHsKICAgIHN0YXRlLnVzZXJMaXN0ID0gdXNlckxpc3Q7CiAgfSwKICBTRVRfVVNFUl9JTkZPOiBmdW5jdGlvbiBTRVRfVVNFUl9JTkZPKHN0YXRlLCB1c2VySW5mbykgewogICAgc3RhdGUudXNlckluZm8gPSB1c2VySW5mbzsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIHVzZXIgbG9naW4KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIC8vIGFjY2Vzc190b2tlbih7IHVzZXJuYW1lOiB1c2VybmFtZS50cmltKCksIHBhc3N3b3JkOiBwYXNzd29yZCB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCB1c2VySW5mby5hY2Nlc3NfdG9rZW4pOwogICAgICBzZXRUb2tlbih1c2VySW5mby5hY2Nlc3NfdG9rZW4pOwogICAgICByZXNvbHZlKCk7CiAgICAgIC8vIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgLy8gICByZWplY3QoZXJyb3IpCiAgICAgIC8vIH0pCiAgICB9KTsKICB9LAogIHNldFVzZXJJbmZvOiBmdW5jdGlvbiBzZXRVc2VySW5mbyhfcmVmMiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBjb21taXQoJ1NFVF9VU0VSX0lORk8nLCB1c2VySW5mbyk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0sCiAgLy8gZ2V0IHVzZXIgaW5mbwogIGdldEluZm86IGZ1bmN0aW9uIGdldEluZm8oX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KCdWZXJpZmljYXRpb24gZmFpbGVkLCBwbGVhc2UgTG9naW4gYWdhaW4uJyk7CiAgICAgICAgfQogICAgICAgIHZhciBuYW1lID0gZGF0YS5uYW1lLAogICAgICAgICAgYXZhdGFyID0gZGF0YS5hdmF0YXI7CiAgICAgICAgY29tbWl0KCdTRVRfSURfTkFNRScsIHJlc3BvbnNlLnJlcXVlc3RfaWQpOwogICAgICAgIGNvbW1pdCgnU0VUX1VTRVJfTElTVCcsIHJlc3BvbnNlLmRhdGEubGlzdCk7CiAgICAgICAgLy8gQ29va2llcy5nZXQoJ3VzZXJJbmZvJykgPyAnJyA6IENvb2tpZXMuc2V0KCd1c2VySW5mbycsIHJlc3BvbnNlLmRhdGEubGlzdFswXSkKCiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWY0LnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgLy8gbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKCgpID0+IHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgICByZXNldFJvdXRlcigpOwogICAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7CiAgICAgIHJlc29sdmUoKTsKICAgICAgLy8gICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIC8vICAgICByZWplY3QoZXJyb3IpCiAgICAgIC8vICAgfSkKICAgIH0pOwogIH0sCiAgLy8gcmVtb3ZlIHRva2VuCiAgcmVzZXRUb2tlbjogZnVuY3Rpb24gcmVzZXRUb2tlbihfcmVmNSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"names":["access_token","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_ID_NAME","idName","SET_AVATAR","SET_USER_LIST","userList","SET_USER_INFO","userInfo","actions","login","_ref","commit","Promise","resolve","reject","setUserInfo","_ref2","_ref3","then","response","data","request_id","list","catch","error","_ref4","resetToken","_ref5","namespaced"],"sources":["/Users/mac/code/2023/juliang/src/store/modules/user.js"],"sourcesContent":["import { access_token, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: ''\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_ID_NAME: (state, idName) => {\n    state.idName = idName\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_USER_LIST: (state, userList) => {\n    state.userList = userList\n  },\n  SET_USER_INFO: (state, userInfo) => {\n    state.userInfo = userInfo\n  },\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    return new Promise((resolve, reject) => {\n      // access_token({ username: username.trim(), password: password }).then(response => {\n      commit('SET_TOKEN', userInfo.access_token)\n      setToken(userInfo.access_token)\n      resolve()\n      // }).catch(error => {\n      //   reject(error)\n      // })\n    })\n  },\n\n  setUserInfo({ commit, state }, userInfo) {\n    return new Promise((resolve, reject) => {\n      commit('SET_USER_INFO', userInfo)\n      resolve()\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const { data } = response\n        if (!data) {\n          return reject('Verification failed, please Login again.')\n        }\n        const { name, avatar } = data\n        commit('SET_ID_NAME', response.request_id)\n        commit('SET_USER_LIST', response.data.list)\n        // Cookies.get('userInfo') ? '' : Cookies.set('userInfo', response.data.list[0])\n\n        resolve(response)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      // logout(state.token).then(() => {\n      removeToken() // must remove  token  first\n      resetRouter()\n      commit('RESET_STATE')\n      resolve()\n      //   }).catch(error => {\n      //     reject(error)\n      //   })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  },\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"],"mappings":"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"}]}