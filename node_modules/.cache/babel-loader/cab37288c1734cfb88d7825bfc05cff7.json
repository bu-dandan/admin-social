{"remainingRequest":"/Users/mac/code/2023/vue0508_副本/node_modules/babel-loader/lib/index.js!/Users/mac/code/2023/vue0508_副本/src/store/modules/user.js","dependencies":[{"path":"/Users/mac/code/2023/vue0508_副本/src/store/modules/user.js","mtime":1683420522715},{"path":"/Users/mac/code/2023/vue0508_副本/babel.config.js","mtime":1681876381588},{"path":"/Users/mac/code/2023/vue0508_副本/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/code/2023/vue0508_副本/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBsb2dpbiwgbG9nb3V0LCBnZXRJbmZvIH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgeyByZXNldFJvdXRlciB9IGZyb20gJ0Avcm91dGVyJzsKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogJycKICB9Owp9Owp2YXIgc3RhdGUgPSBnZXREZWZhdWx0U3RhdGUoKTsKdmFyIG11dGF0aW9ucyA9IHsKICBSRVNFVF9TVEFURTogZnVuY3Rpb24gUkVTRVRfU1RBVEUoc3RhdGUpIHsKICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIGdldERlZmF1bHRTdGF0ZSgpKTsKICB9LAogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIHVzZXIgbG9naW4KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLAogICAgICBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgdG9rZW46ICd0b2tlbicKICAgICAgfTsKICAgICAgLy8gbG9naW4oeyB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLCBwYXNzd29yZDogcGFzc3dvcmQgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8vICAgY29uc3QgeyBkYXRhIH0gPSByZXNwb25zZQogICAgICBjb21taXQoJ1NFVF9UT0tFTicsIGRhdGEudG9rZW4pOwogICAgICBzZXRUb2tlbihkYXRhLnRva2VuKTsKICAgICAgcmVzb2x2ZSgpOwogICAgICAvLyB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIC8vICAgcmVqZWN0KGVycm9yKQogICAgICAvLyB9KQogICAgfSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIG5hbWU6ICd1c2VyJywKICAgICAgICBhdmF0YXI6ICdodHRwczovL2Mtc3NsLmR1aXRhbmcuY29tL3VwbG9hZHMvYmxvZy8yMDIxMDcvMTkvMjAyMTA3MTkxNTA2MDFfNDQwMWUuanBnJwogICAgICB9OwogICAgICAvLyBnZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgLy8gICBjb25zdCB7IGRhdGEgfSA9IHJlc3BvbnNlCgogICAgICBpZiAoIWRhdGEpIHsKICAgICAgICByZXR1cm4gcmVqZWN0KCdWZXJpZmljYXRpb24gZmFpbGVkLCBwbGVhc2UgTG9naW4gYWdhaW4uJyk7CiAgICAgIH0KICAgICAgdmFyIG5hbWUgPSBkYXRhLm5hbWUsCiAgICAgICAgYXZhdGFyID0gZGF0YS5hdmF0YXI7CiAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKTsKICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgLy8gICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIC8vICAgICByZWplY3QoZXJyb3IpCiAgICAgIC8vICAgfSkKICAgIH0pOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIC8vIGxvZ291dChzdGF0ZS50b2tlbikudGhlbigoKSA9PiB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICAgIC8vICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAvLyAgICAgcmVqZWN0KGVycm9yKQogICAgICAvLyAgIH0pCiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","actions","_ref","userInfo","commit","username","password","Promise","resolve","reject","data","_ref2","_ref3","resetToken","_ref4","namespaced"],"sources":["/Users/mac/code/2023/vue0508_副本/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: ''\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  }\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      const data = {\n        token: 'token'\n      }\n      // login({ username: username.trim(), password: password }).then(response => {\n      //   const { data } = response\n      commit('SET_TOKEN', data.token)\n      setToken(data.token)\n      resolve()\n      // }).catch(error => {\n      //   reject(error)\n      // })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      const data = {\n        name: 'user',\n        avatar: 'https://c-ssl.duitang.com/uploads/blog/202107/19/20210719150601_4401e.jpg'\n      }\n      // getInfo(state.token).then(response => {\n      //   const { data } = response\n\n      if (!data) {\n        return reject('Verification failed, please Login again.')\n      }\n\n      const { name, avatar } = data\n\n      commit('SET_NAME', name)\n      commit('SET_AVATAR', avatar)\n      resolve(data)\n      //   }).catch(error => {\n      //     reject(error)\n      //   })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      // logout(state.token).then(() => {\n      removeToken() // must remove  token  first\n      resetRouter()\n      commit('RESET_STATE')\n      resolve()\n      //   }).catch(error => {\n      //     reject(error)\n      //   })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"],"mappings":"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"}]}